window.rsharpe=window.rsharpe||{},function(n){"use strict";function i(){this.bottom=this.top+this.height}var c=rsharpe.waypoint={$scrollElement:n(window),callbacksList:[],defaults:{lockTime:250},init:function(t){var i=this.data("callbacks.waypoint")||n.Callbacks();return t.offset=t.offset||0,t._order=++i.count||(i.count=1),c.callbacksList.includes(i)||c.callbacksList.push(i),i.add(t._callee=c._onScroll.bind(this,t,[])),c._start.call(this.data("callbacks.waypoint",i),c.defaults.lockTime)},_onScroll:function(t,i,e){c._observe.call(this,t,i,e,function(){this.data("callbacks.waypoint").remove(t._callee)})},_observe:function(a,o,r,t){o.length!==this.length?this.filter(function(){return-1===o.indexOf(this)}).each(function(){var t=n(this).data("waypoint",a);if(t.is(":visible")){var i=new s(t),e=i.height*a.offset/100;r.bottom>i.top+e&&r.top+1<i.bottom?(c._tryFireEnter.call(t),r.top+1>i.top?c._tryFireActive.call(t):c._tryFireInactive.call(t)):(c._tryFireInactive.call(t),c._tryFireExit.call(t)&&a.once&&o.push(t[0]))}}):t&&t.call(this)},_tryFireEnter:function(){var t="isDetected.waypoint"+this.data("waypoint")._order;return!this.data(t)&&(c._fire.call(this.data(t,!0),"onEnter"),!0)},_tryFireExit:function(){var t="isDetected.waypoint"+this.data("waypoint")._order;return!!this.data(t)&&(c._fire.call(this.data(t,!1),"onExit"),!0)},_tryFireActive:function(){var t="isActive.waypoint"+this.data("waypoint")._order;return!this.data(t)&&(c._fire.call(this.data(t,!0),"onActive"),!0)},_tryFireInactive:function(){var t="isActive.waypoint"+this.data("waypoint")._order;return!!this.data(t)&&(c._fire.call(this.data(t,!1),"onInactive"),!0)},_fire:function(t){var i=this.data("waypoint")[t];i&&i.call(this)},_start:function(t){return c.isInit||(c.$scrollElement.on("scroll resize",function(){c.locked||(c.locked=!0,setTimeout(function(){c.callbacksList.forEach(function(t){t.fire(new e(c.$scrollElement))}),c.locked=!1},t))}),c.isInit=!0),c.$scrollElement.trigger("resize"),this}},e=function(t){this.top=t.scrollTop(),this.height=t.height(),i.call(this)};e.prototype=Object.create(i.prototype),e.prototype.constructor=e;var s=function(t){this.top=t.offset().top,this.height=t.outerHeight(),i.call(this)};s.prototype=Object.create(i.prototype),s.prototype.constructor=s,n.fn.waypoint=function(t){return this.length?c.init.call(this,t||{}):this}}(jQuery);